{% extends "base.html" %}
{% block title %}Index{% endblock %}
{% block head %}
    {{ super() }}
{% endblock %}
{% block content %}
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
  <script src="leaflet/leaflet.ajax.min.js" type="text/javascript"></script>

  <div class="container-fluid">
    <div class="row">
       <h1> College Scorecard Map </h1>
       <p> The map contains US Universities plotted at the center of their zipcodes.  The bubble size represents the fall undergrad class size</p>
    </div>
    <div class="row">
       <div id="mapid"></div>

       <script>
        var mymap = L.map('mapid').setView([38.57, -120.71], 5);
		L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    		attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(mymap);
	
       	var geojsonMarkerOptions = {
            radius: 8,
            fillColor: "#ff7800",
            color: "#000",
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
        };
        
        function onEachFeature(feature, layer) {
            var popupContent = "<p>This is the size: " +
                    feature.properties.size + "</p>";
            if (feature.properties && feature.properties.popupContent) {
                popupContent += feature.properties.popupContent;
            }
            layer.bindPopup(popupContent);
        }
        
        var geojsonLayer = new L.GeoJSON.AJAX("ex.geojson", {
        
        onEachFeature:onEachFeature,
        
        pointToLayer: function (feature, latlng) {
                return L.circleMarker(latlng, {
                    radius: 100,
                    fillColor: "#ff7800",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 0.8
                });
            }
        });        
        
        geojsonLayer.addTo(mymap);
        
	</script>
    </div>
  </div>
{% endblock %}
